name: data_check
conda_env: conda.yml

entry_points:
  main:
    parameters:
      csv:          {type: string,  description: "Input CSV artifact to test (e.g., clean_sample.csv:latest)"}
      ref:          {type: string,  description: "Reference CSV artifact (e.g., clean_sample.csv:reference)"}
      kl_threshold: {type: float,   description: "KL divergence threshold"}
      min_price:    {type: float,   description: "Minimum accepted price"}
      max_price:    {type: float,   description: "Maximum accepted price"}
    command: >
      pytest . -vv
      --csv {csv}
      --ref {ref}
      --kl_threshold {kl_threshold}
      --min_price {min_price}
      --max_price {max_price}
